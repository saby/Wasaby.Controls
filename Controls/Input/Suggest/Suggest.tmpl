<div class="ws-Suggest">

    <Controls:Input:resources:InputRender:InputRender
        name="suggestText"
        size="{{ _options.size }}"
        viewModel="{{_simpleViewModel}}"
        trim="{{_options.trim}}"
        selectOnClick="{{_options.selectOnClick}}"
        inputCharRegExp="{{_options.inputCharRegExp}}"
        constraint="{{_options.constraint}}"
        value="{{_options.value}}"
        tagStyle="{{_options.tagStyle}}"
        placeholder="{{_options.placeholder}}"
        validationErrors="{{_options.validationErrors}}"
        on:valueChanged="_changeValueHandler()"
        on:keydown="_keyDownHandler()"
        on:blur="_focusOut()"
        attr:class="ws-Suggest__inputRender">

        <ws:content>
            <ws:partial template="tmpl!Controls/Input/resources/input"/>
        </ws:content>

        <ws:afterFieldWrapper>
            <div if="{{_searching || _options.value}}" class="ws-Suggest__afterFieldWrapper">
                <div if="{{_searching}}" class="ws-Suggest__loader"></div>
                <div if="{{_options.value}}" class="ws-Suggest__clear icon-size icon-Close" on:click="_clearClick()"></div>
            </div>
        </ws:afterFieldWrapper>

    </Controls:Input:resources:InputRender:InputRender>

    <Controls:Popup:Opener:Sticky name="suggestPopupOpener">
        <ws:popupOptions vAlingTopClass="ws-Suggest__popup-vAlignTop" vAlingBottomClass="ws-Suggest__popup-vAlignBottom" autoHide="{{true}}" template="Controls/Input/resources/SuggestView/SuggestView">
            <ws:corner vertical="bottom"/>
            <ws:verticalAlign side="bottom"/>
            <ws:componentOptions idProperty="{{_options.idProperty}}"/>
            <ws:eventHandlers onFocusIn="{{_popupFocusIn}}" onFocusOut="{{_popupFocusOut}}" onResult="{{_selectHandler}}" onClose="{{_popupClose}}"/>
        </ws:popupOptions>
    </Controls:Popup:Opener:Sticky>

    <Controls:Popup:Opener:Stack name="showAllOpener">
        <ws:popupOptions template="Controls/Input/resources/SuggestShowAll/SuggestShowAll" className="ws-Suggest__showAllPopup">
            <ws:componentOptions source="{{_options.source}}" template="{{_options.suggestTemplate}}" navigation="{{_options.navigation}}"></ws:componentOptions>
            <ws:eventHandlers onResult="{{_selectHandler}}"/>
        </ws:popupOptions>
    </Controls:Popup:Opener:Stack>

    <Controls:Event:Emitter event="resize" on:resize="_resize()" attr:tabindex="{{-1}}"/>

</div>
