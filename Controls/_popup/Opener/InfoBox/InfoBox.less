.controls-InfoBox {
   padding-top:   @spacing_Infobox-between-content-border-top;
   padding-right: @spacing_Infobox-between-content-border-right;
   padding-bottom: @spacing_Infobox-between-content-border-bottom;
   padding-left:   @spacing_Infobox-between-content-border-left;

   box-sizing: border-box;
   max-width: @max-width_Infobox;
   overflow: auto;
}

/**
 * In firefox, the text baseline is 1px higher than the standard. Compensate for this by reducing the indentation between the text and the upper border by 1px.
 * To ensure that the height is not changed let's increase the indentation between the text and the bottom border by 1px.
 * Presumably the problem is in the font. Error written https://online.sbis.ru/opendoc.html?guid=1e389bc5-8be7-4394-abdd-231e3ec040a8
 */
.ws-is-firefox {
   .controls-InfoBox {
      padding-top: @spacing_Infobox-between-content-border-top - 1;
   }
}

.controls-InfoBox__popup {
   border: @border-width_Infobox solid;
   box-sizing: border-box;

   &:before {
      width: @size_Infobox-arrow;
      height: @size_Infobox-arrow;
      position: absolute;
      border: @border-width_Infobox solid;
      background: @background-color_Infobox_default;
      border-color: @border-color_Infobox_default;
      border-top: none;
      border-left: none;
      content: '';
      box-sizing: border-box;
   }

   &.controls-Popup-corner-vertical-top.controls-Popup-align-vertical-top {
      //tl
      &.controls-Popup-align-horizontal-right:before {
         transform: rotate(45deg);
         bottom: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         left: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @horizontal-offset_Infobox-arrow;
      }

      //tr
      &.controls-Popup-align-horizontal-left:before {
         transform: rotate(45deg);
         bottom: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         right: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @horizontal-offset_Infobox-arrow;
      }

      //tc
      &.controls-Popup-align-horizontal-center:before {
         transform: rotate(45deg);
         bottom: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         left: ~'calc(50% - '@length_Infobox-arrow-diagonal/2 - @border-width_Infobox ~')';
      }
   }

   &.controls-Popup-corner-vertical-bottom.controls-Popup-align-vertical-bottom {
      //bl
      &.controls-Popup-align-horizontal-right:before {
         transform: rotate(225deg);
         top: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         left: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @horizontal-offset_Infobox-arrow;
      }

      //br
      &.controls-Popup-align-horizontal-left:before {
         transform: rotate(225deg);
         top: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         right: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @horizontal-offset_Infobox-arrow;
      }

      //bc
      &.controls-Popup-align-horizontal-center:before {
         transform: rotate(225deg);
         top: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         left: ~'calc(50% - '@length_Infobox-arrow-diagonal/2 - @border-width_Infobox ~')';
      }
   }

   &.controls-Popup-corner-horizontal-right.controls-Popup-align-horizontal-right {
      //rt
      &.controls-Popup-align-vertical-bottom:before {
         transform: rotate(135deg);
         left: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         top: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @vertical-offset_Infobox-arrow;
      }

      //rb
      &.controls-Popup-align-vertical-top:before {
         transform: rotate(135deg);
         left: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         bottom: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @vertical-offset_Infobox-arrow;
      }

      //rc
      &.controls-Popup-align-vertical-center:before {
         transform: rotate(135deg);
         left: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         top: ~'calc(50% - '@length_Infobox-arrow-diagonal/2 - @border-width_Infobox ~')';
      }
   }

   &.controls-Popup-corner-horizontal-left.controls-Popup-align-horizontal-left {
      //lt
      &.controls-Popup-align-vertical-bottom:before {
         transform: rotate(-45deg);
         right: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         top: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @vertical-offset_Infobox-arrow;
      }

      //lb
      &.controls-Popup-align-vertical-top:before {
         transform: rotate(-45deg);
         right: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         bottom: (@length_Infobox-arrow-diagonal - @size_Infobox-arrow)/2 + @vertical-offset_Infobox-arrow;
      }

      //lc
      &.controls-Popup-align-vertical-center:before {
         transform: rotate(-45deg);
         right: -(@length_Infobox-arrow-diagonal/2 - @border-width_Infobox);
         top: ~'calc(50% - '@length_Infobox-arrow-diagonal/2 - @border-width_Infobox ~')';
      }
   }
}

.controls-InfoBox__closeButton {
   position: absolute;
   top: @spacing_Infobox-between-top-close-button;
   right: @spacing_Infobox-between-right-close-button;
   cursor: pointer;
   color: @color_Infobox-close-button;

   &:hover {
      color: @color_Infobox-close-button_hover;
   }
}

.controls-InfoBox__content {
   height: 100%;
}

.controls-InfoBox__message_margin {
   margin-right: @spacing_Infobox-between-message-border;
}

.controls-InfoBox_floatElement {
   width: @size_Infobox-float-element;
   height: @size_Infobox-float-element;
   float: right;
}

.controls-InfoBox_style_outline {
   @variants: default,  danger;
   .for(@variants, { &_@{_item} {
      background: @background-color_Infobox_default;
      box-shadow: ~"@{color_Infobox-shadow_@{_item}}" @box-shadow_Infobox;
      border-color: ~"@{border-color_Infobox_@{_item}}";

      &.controls-InfoBox__popup:before {
         border-color: ~"@{border-color_Infobox_@{_item}}";
      }
   } });
}

.controls-InfoBox_style_marker {
   @variants: default,  danger, info, secondary, warning, success;
   .for(@variants, { &_@{_item} {
      background: @background-color_Infobox_default;
      box-shadow: @color_Infobox-shadow_default @box-shadow_Infobox;
      border-color: @border-color_Infobox_default;
      border-top: @border-width_Infobox-marker solid ~"@{border-color_Infobox_@{_item}}";

      &.controls-Popup-corner-vertical-bottom.controls-Popup-align-vertical-bottom:before {
         border-color: ~"@{border-color_Infobox_@{_item}}";
      }
   } });
}

/*
   Class to access the constant themes from js
*/
.controls-InfoBox__themeConstants {
   margin-left: @length_Infobox-arrow-diagonal;
   margin-right: @horizontal-offset_Infobox-arrow;
   margin-bottom: @vertical-offset_Infobox-arrow;
   margin-top: @spacing_Infobox-between-target-popup;
   max-width: @max-width_Infobox;
}
