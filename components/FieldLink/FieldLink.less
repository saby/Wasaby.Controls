/*
   <div class="controls-FieldLink">
      <div class="controls-TextBox__wrapper">
         <div class="controls-FieldLink__beforeFieldWrapper">
            <div class="controls-FieldLink__showAllLinks">...</div>
            <div class="controls-FieldLink__itemsCollection">
               <div class="controls-FieldLink__item">
                  <div class="controls-FieldLink__item-caption"> -caption- </div>
                  <div class="controls-FieldLink__item-cross"></div>
               </div>
            </div>
         </div>
         <div class="controls-TextBox__fieldWrapper">
            <input class="controls-TextBox__field"/>
            <div class="controls-TextBox__placeholder"> -placeholder- </div>
         </div>
         <div class="controls-FieldLink__afterFieldWrapper">
            <div class="controls-FieldLink__dropAllLinks"> ✕ </div>
            <div class="controls-FieldLink__showSelector"> ≡ </div>
         </div>
      </div>
   </div>
*/

/* ------------------------------------------------------------------------------------------------------------------
   ------------------------------------ controls-FieldLink__flexWrapper --------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__flexWrapper {
   .inline-flexbox();
   .align-items(baseline);
   width: 100%;
   height: 100%;
}

/* ------------------------------------------------------------------------------------------------------------------
   ------------------------------------ controls-FieldLink__beforeFieldWrapper --------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__beforeFieldWrapper {
   .inline-flexbox();
   .align-items(baseline);
   .flex-shrink(0);
   overflow: hidden;
}
// todo Нужно переделать верстку и расчёты поля связи в соответствии с демо: http://jsfiddle.net/alex111089/q0ztd41n/
// тогда будет полноценная flex-верстка и данные стили можно будет убрать
.controls-FieldLink__beforeFieldWrapper-enabled {
   max-width: ~'calc(100% - '@width_FieldLink-item-cross~')';
}
.controls-FieldLink__beforeFieldWrapper-disabled {
   max-width: 100%;
}
// Cross-browser display last selected items (fix IE)
// bug: https://codepen.io/anon/pen/JrGQQx
// fix: http://jsfiddle.net/m9tf291j/
.controls-FieldLink__itemsCollection {
   .inline-flexbox();
   .justify-content(flex-end);
   .align-items(baseline);
   height: 100%;
   min-width: 0;
   max-width: 100%; //Чтобы в IE div не растягивался за пределы родителя
}
.ws-is-ie {
   .controls-FieldLink__itemsCollection {
      .flex-direction(row-reverse);
      .justify-content();
   }
}
.controls-FieldLink__item {
   .flex-shrink(0);
   .inline-flexbox();
   .align-items(baseline);
   cursor: default;
}
.controls-FieldLink__item-single {
   .flex-shrink();
   max-width: 100%;
}
.controls-FieldLink__item-inField {
   box-sizing: border-box;
   padding: 0 @spacing_FieldLink-item_inField 0 0;
   height: 100%;
}
.controls-FieldLink__item-caption {
   .text-overflow();
   .flex-shrink();
   display: inline-block;
   max-width: 100%;
}
.controls-FieldLink__item-cross {
   color: @color_FieldLink_item-cross;
}
.controls-FieldLink__item-caption__underlined:hover {
   text-decoration: underline;
   cursor: pointer;
}
.controls-FieldLink__item-caption__bold {
   font-weight: bold;
}
.controls-FieldLink__item-caption__big {
   font-size: @font-size_FieldLink-item-caption_big;
   font-weight: bold;
   color: @color_FieldLink-item-caption_big;
}
/* ------------------------------------------------------------------------------------------------------------------
   ------------------------------------ controls-FieldLink__afterfieldWrapper ---------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__afterFieldWrapper {
   .inline-flexbox();
   .flex-shrink(0);
}
.controls-FieldLink__dropAllLinks {
   color: @color_FieldLink_dropAllLinks;
}
.controls-FieldLink__dropAllLinks, .controls-FieldLink__showSelector {
   margin: 0 @spacing_FieldLink-dropAllLinks 0 0;
}
.controls-FieldLink__button {
   .icon-size-without-important(@icon-size_FieldLink-button);
   cursor: pointer;
}
.controls-FieldLink__showSelector-button {
   color: @color_FieldLink-showSelectorButton;
   &:hover {
      color: @color_FieldLink-showSelectorButton_hovered;
   }
}
.controls-FieldLink__showAllLinks {
   cursor: pointer;
   color: @color_FieldLink-showAllLinks;
   z-index: 1;
   .flex-shrink(0);
   &:hover {
      text-decoration: underline;
      color: @color_FieldLink-showAllLinks_hovered;
   }
}
.controls-FieldLink__showAllLinks-enabled {
   padding: 0 @spacing_FieldLink-showAllLinks_enabled 0 0;
}

.controls-FieldLink__indicator {
   order: 1;
}

.controls-FieldLink__showAllLinks-disabled {
   background: @background_FieldLink-showAllLinks_disabled;
   position: relative; //todo: тени нет в стандарте, так что всё это не нужно
   &:after {
      content: '';
      position: absolute;
      right: -@fieldLink-showAll-shadow-width;
      width: @fieldLink-showAll-shadow-width;
      top: 0;
      bottom: 0;
      .horizontal-gradient(@default-bg-color, rgba(255, 255, 255, 0));
      background-color: transparent;
   }
}
/* ------------------------------------------------------------------------------------------------------------------
   ----------------------------------------- controls-FieldLink__picker ---------------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__picker {
   max-height: @max-height_FieldLink-picker;
   min-height: @min-height_FieldLink-picker;
   border: @border-width_FieldLink-picker solid @border-color_FieldLink_picker;
   box-sizing: border-box;
   margin-top: 0;
   overflow: auto;
   padding: @spacing_FieldLink-linkContainer;
   border-top: none;
   .flexbox();
   .flex-wrap(wrap);
}
//При открытии пикера не должно показываться 2 границы (от пикера и от текстбокса), так что при открытии вверх не рисуем
//нижнюю границу, а при открытии вниз - верхнюю
.controls-FieldLink__picker_revert_vertical {
   border-top: @border-width_FieldLink-picker solid @border-color_FieldLink_picker;
   border-bottom: none;
}
.controls-FieldLink__item-inPicker {
   width: 50%;
   height: auto;
}

.controls-FieldLink__fieldWrapper {
   margin-right: @horizontal-padding_InputRender;
}

.ws-invisible.controls-FieldLink__fieldWrapper {
   //Если поле ввода скрыто, то отступ между текстом и иконкой ему не нужен
   margin-right: 0;
}

/*
   СЛОЙ СОВМЕСТИМОСТИ
 */
.controls-IconButton.controls-FieldLink__button {
   //Сейчас в поле связи лежит компонент IconButton, по которому отрывается меню с выбором словаря.
   //В зависимости от порядка, в котором прилетают стили, возникает конфликт между классом controls-IconButton
   //и controls-FieldLink__button, они начинают перебивать font-size у друг друга. В controls-IconButton font-size
   //равен 0, для того, чтобы не наследовать родительский font-size и иконка позиционировалась правильно.
   //У controls-FieldLink__button font-size имеет явное значение, для того, чтобы элемент правильно позиционировался
   //относительно базовой линии. Дозвращаем миксин icon-size, иа после отказа использования компонентов внутри поля
   //связи, можно будет вернуть icon-size-without-important.
   font-size: @icon-size_FieldLink-button;
}
