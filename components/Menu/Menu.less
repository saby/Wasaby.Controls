.controls-Menu__Popup {
   font: @default-font-name;
   font-size:  @font-size_Popup;
   padding: @padding_Menu;
   margin: @margin_Menu;
   max-width: @max-width_Menu;
   .flexbox();
   .flex-direction(column);
   border: @default-border-width solid @border-color_Menu;
   background-color: @background-color_Menu;
   .user-select(none);

   &.controls-Menu__breakWord {
      word-break: break-word;
   }

   .border-radius(0);
   .box-shadow(@shadow_Menu);
   .box-sizing(border-box);

   .controls-Menu__submenu {
      display: block;
   }
   .controls-Menu__header{
      box-sizing: border-box;
      padding: @padding_Menu-header;
      .flex-shrink(0);
   }
   .controls-MenuItem {
      min-height: @height_MenuItem;
      height: auto;
   }
   // скрываем дополнительные опции через height: 0,
   // чтобы не было скачка при раскрытии доп пунктов
   // т.к. в этом случае меню растянется в ширину с учетом скрытых пунктов
   .controls-MenuItem-additional {
      min-height: 0;
      height: 0;
      visibility: hidden;
   }
   &.controls-Menu-showAdditionalItems {
      .controls-MenuItem-additional {
         .flexbox();
         min-height: @height_MenuItem;
         height: auto;
         visibility: visible;
      }
   }
   .controls-Menu__itemsContainer {
      padding: @padding_Menu-container;
   }
   &.controls-popup-revert-vertical {
      .flex-direction(column-reverse);
      padding: 0;

      &.controls-Menu__SubMenuPopup {
         padding: @padding_Menu-submenu;
      }

      .controls-Menu__header + .controls-Menu__itemsContainer {
         padding: @menu-link-menu-revert-item-container-padding;
      }
   }
   &.controls-popup-revert-horizontal {
      .controls-Menu__header {
         .flex-direction(row-reverse);
      }
   }
}

.controls-Menu__hasChild {
   &:after {
      position: absolute;
      font-family: @default-icon-small-font !important;
      font-size: @menu-expand-icon-font-size;
      top: @menu-expand-top-offset;
      right: @menu-expand-right-offset;
      width: @menu-expand-width;
      height: @menu-expand-height;
      content: @menu-expand-content;
      color: @color_primary;
      border-width: 0;
      border-style: solid;
      border-color: @menu-expand-border-color;
      background: @menu-expand-bg;
      .box-sizing(border-box);
   }
   &:hover:after {
      border-width: 0;
      border-style: solid;
      border-color: @menu-expand-hover-border-color;
      background: @menu-expand-hover-bg;
   }
   &.controls-MenuItem{
      padding-right: @menu-item-expand-padding-right;
   }
}

.controls-Menu__Popup:not(.controls-MenuPicker__resetIconColor) {
   .controls-Menu__header-icon {
      color: @padding_Menu-header-iconcolor !important;
   }
}
.controls-Menu__submenu {
   display: none;
}
.controls-Menu__SubMenuPopup {
   margin: @menu-subpopup-margin;
   padding: @padding_Menu-submenu;
   max-height: @DropdownList-picker-max-height;
   overflow: auto;
}

.controls-Menu {
   .controls-Menu__header {
      position: relative;
      cursor: pointer;
      height: @height_Menu-header;
      font-size: @font-size_Popup;
      font-weight: @font-weight_Menu-header;
      background-color: @background-color_Menu-header;
      overflow: hidden;
      .flexbox();
      .align-items(center);

      .controls-Menu-headWrapper {
         .flexbox();
         .align-items(center);
      }
      .controls-Menu__header-caption {
         color: @color_Menu-header;
         .flex-shrink(0);
      }
   }
   &.controls-Menu__hide-menu-header {
      .controls-Menu__header {
         display: none;
      }
   }
}

.controls-Menu__header-icon + .controls-Menu__header-caption{
   padding-left: @padding-left_Menu-header-icon;
}
.controls-Menu__header-icon + .controls-Menu__header-caption:empty{
   padding-left: 0;
}

.controls-Menu__separator {
   position: relative;
   height: @height_Menu-separator;
}
.controls-Menu__separator:before {
   content: '';
   position: absolute;
   display: inline-block;
   right: @left_Menu-separator-line;
   left: @left_Menu-separator-line;
   top: @top_Menu-separator-line;
   height: @height_Menu-separator-line;
   background-color: @default-border-color-bottom-disabled;
}

.ws-is-ie {
   //в IE flex-direction(column-reverse) должен находиться на контейнере, у которого переворачиваем узлы
   //Иначе вылезает баг: не появится скролл.
   .controls-Menu__SubMenuPopup {
      .controls-Menu__submenu {
         .flexbox();
         .flex-direction(column);
      }
      &.controls-popup-revert-vertical {
         .flex-direction(column);
         .controls-Menu__submenu {
            overflow-y: auto;
            .flex-direction(column-reverse);
         }
      }
   }
}

.ws-is-firefox, .ws-is-ie {
   .controls-Menu__Popup {
      display: block;
      &.controls-popup-revert-vertical {
         .controls-Menu__header{
            margin-top: @padding-value_Menu;
         }
         &.controls-Menu__hide-menu-header .controls-Menu__itemsContainer {
            padding-bottom: @padding-value_Menu;
         }
      }
   }
}