@import (reference) "../../themes/_header";

.max-width_BackButton_caption(@back-arrow-width, @back-button-arrow-padding-right) {
   .ws-is-mobile-safari &, .ws-is-desktop-safari &, .ws-is-mobile-chrome-ios &, .ws-is-webkit & {
      /**
       * 1px прибавляем для компенсирования погрешности расчетов calc.
       * В safari значение calc(...) округляется в меньшую сторону, из-за чего всегда происходит обрезание текста.
       */
      max-width: calc(~"100% - @{back-arrow-width} - @{back-button-arrow-padding-right} + 1px");
   }
   max-width: calc(~"100% - @{back-arrow-width} - @{back-button-arrow-padding-right} + 1px");
}

.ws-is-ie10, .ws-is-ie11 {
   .controls-BackButton .controls-BackButton__caption_size_h2 {
      position: relative;
      top: -1px;
   }
}

.ws-is-firefox .controls-BackButton__caption_size_default-backButton.controls-Link {
   line-height: normal;
}



.controls-BackButton {
   cursor: pointer;
   white-space: nowrap;
   display: inline-block;
   height: @back-button-height;
}

.controls-BackButton_color-hover_accent1:hover .controls-BackButton__caption {
   &, &.controls-Click__active, &:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover):hover {
      .ws-header-accent1-hover();
   }
}

.controls-BackButton_color-hover_accent2:hover .controls-BackButton__caption {
   &, &.controls-Click__active, &:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover):hover {
      .ws-header-accent2-hover();
   }
}

.controls-BackButton_color-hover_default-backButton:hover {
   .controls-BackButton__caption {
      body:not(.ws-is-mobile-platform) &,
      &.controls-Click__active {
         color: @back-button-caption-active-color !important;
      }
   }
   .ws-backArrow_color_default-backButton:before {
      color: @back-button-arrow-hover-color;
   }
}

.controls-BackButton__orange.controls-BackButton_color-hover_default-backButton:hover .controls-BackButton__caption {
   body:not(.ws-is-mobile-platform) & .controls-Link__text,
   &.controls-Click__active .controls-Link__text {
      color: @primary-color !important;
   }
}

.controls-BackButton__caption {
   &_color_accent1.controls-Link {
      .ws-header_color_accent1();
   }
   &_color_accent2.controls-Link {
      .ws-header_color_accent2();
   }
   &_color_default-backButton.controls-Link {
      color: @back-button-text-color;
   }
   .controls-BackButton__orange &_color_default-backButton .controls-Link__text {
      color: @header-color;
   }
   &_size_h2.controls-Link {
      .ws-header_size_h2();
      .max-width_BackButton_caption(@back-arrow-width-h2, @back-button-arrow-padding-right-1);
   }
   &_size_h3.controls-Link {
      .ws-header_size_h3();
      .max-width_BackButton_caption(@back-arrow-width-h3, @back-button-arrow-padding-right-2);
   }
   &_size_h6.controls-Link {
      .ws-header_size_h6();
      .max-width_BackButton_caption(@back-arrow-width-h6, @back-button-arrow-padding-right-2);
   }
   &_size_default-backButton.controls-Link {
      .max-width_BackButton_caption(@back-arrow-width-h3, @back-button-arrow-padding-right-2);
      .ws-header-size-mixin(@back-button-font-size, @back-button-height);
      /**
       * На iPad, если в качестве caption будут 2 текста с разными font-size, то caption не выравнивается как должен.
       * Вероятно проблема в стилях Link. Если использовать только классы ws-header, то такой проблемы нет.
       */
      body.ws-is-mobile-safari &, body.ws-is-mobile-chrome-ios & {
         line-height: normal;
      }
   }
   &_size_bold.controls-Link {
      .ws-header_size_weight();
   }
   &Arrow_size_1 {
      padding-right: @back-button-arrow-padding-right-1;
   }
   &Arrow_size_2 {
      padding-right: @back-button-arrow-padding-right-2;
   }
   & .controls-Button__text {
      text-decoration: none !important;
   }
}

.controls-BackButton__arrow.controls-Link {
   display: none;
}

.controls-BackButton__show-arrow:hover .controls-BackButton__arrow {
   display: inline-block;
   margin-right: -@icon-width;
}

.ws-backArrow_color_default-backButton {
   .ws-backArrow_color_accent1();
   &:before {
      color: @back-button-arrow-color;
   }
}

.controls-BackButton__orange .ws-backArrow_color_default-backButton {
   .ws-backArrow_color_accent2();
}

.ws-backArrow_size_default-backButton {
   .ws-backArrow_size_h3();
   &:before {
      font-size: @back-button-font-size;
   }
}

.controls-BackButton__empty {
   visibility: hidden;
   width: 0;
}