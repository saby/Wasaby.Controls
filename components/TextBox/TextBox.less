/*
   <div class="controls-TextBox">
      <div class="controls-TextBox__wrapper">
         <div class="controls-TextBox__fieldWrapper>
            <input class="controls-TextBox__field" />
            <div class="controls-TextBox__placeholder">
                <span class="controls-TextBox__placeholder__overflow"> -placeholder- </span>
            </div>
         </div>
      </div>
      <div class="controls-TextBox__informationIcon"></div>
   </div>
 */
//Поля ввода и кнопки разных размеров в одной демке: https://jsfiddle.net/Lkfcejmp/
//В этой демке показывается зачем нужен был padding-bottom в больших полях: https://jsfiddle.net/jrt9sLa8/
//Суть в том, что поля ввода могут быть внутри контейнера с display: flex и align-items: center и из-за этого съедет базовая линия


/*
   СЛОЙ СОВМЕСТИМОСТИ
 */
.controls-TextBox__field-uppercase {
   text-transform: uppercase;
}

.controls-TextBox__field-lowercase {
   text-transform: lowercase;
}

.controls-TextBox_text-align_left {
   text-align: left;
}

.controls-TextBox_text-align_right {
   text-align: right;
}
//В старых компонентах нужно скрывать placeholder по умолчанию
.controls-InputRender__field + .controls-Text__placeholder {
   display: none;
}

/*
   По умолчанию скрываем плейсхолдер, а дальше 2 ситуации:
   1) Для contenteditable управляем видимостью плейсхолдеров через :empty.
   2) Для input нельзя использовать :empty, т.к. он там висит всегда. Поэтому вешаем аттрибут required на input, и тогда
   на него будет вешаться :invalid, если он пустой.
   https://jsfiddle.net/7oyopngt/
 */
.controls-InputRender__field:empty:not(input):not(textarea) + .controls-Text__placeholder {
   .inline-flexbox();
}

/**
 * В ie правляем видимостью placeholder через :invalid, в остальных через :placeholder-shown, потому что он не поддерживается в ie.
 * https://developer.mozilla.org/ru/docs/Web/CSS/:placeholder-shown
 */
body:not(.ws-is-ie) {
   //Хром обновился и стал вешать :invalid в тех ситуациях, когда количество символов в поле ввода превышает maxlength,
   //так что в нем будем показывать плейсхолдер так.
   .controls-InputRender__field:placeholder-shown + .controls-Text__placeholder {
      display: inline-flex;
   }
}

body.ws-is-ie {
   .controls-InputRender__field:invalid + .controls-Text__placeholder {
      display: inline-flex;
   }
}

//В формах для ввода логина и пароля браузеры игнорируют аттрибут autocomplete="off" и вставляют логин\пароль в любом случае.
//Также, хром проводит валидацию поля только после того, как пользователь совершит какое-нибудь действие на странице.
//Так что единственный способ узнать, что произошло автодополнение и нужно скрыть плейсхолдер - проверить :-webkit-autofill.
.controls-InputRender__field:-webkit-autofill + .controls-Text__placeholder {
   display: none;
}

.controls-TextBox.controls-Text-InputRender_state_default {
   caret-color: @color_InputRender;
}

.controls-TextBox.controls-Text-InputRender_state_active {
   caret-color: @color_InputRender;
}

.controls-TextBox.controls-Text-InputRender_state_error {
   caret-color: @color_InputRender;
}

.controls-TextBox.controls-Text-InputRender_state_disabled {
   caret-color: transparent;
}
//В новых контролах tagStyle: disabled поменялось на tagStyle: info
.controls-InputRender__tagStyle-disabled {
   border-right-color: @color_InputRender-tagStyle_info;
}
